diff a/tests/unit/analysis/test_builder.py b/tests/unit/analysis/test_builder.py	(rejected hunks)
@@ -44,3 +44,32 @@ def test_variable_builder_merges_configs_and_warns_for_alias(monkeypatch):
     assert built.cfg["meta_value"] == 2
     assert built.cfg["user_value"] == 3
     assert built.cfg["runtime_value"] == 4
+
+
+def test_build_variable_for_particle_scope(monkeypatch):
+    class Dummy:
+        meta = VariableMeta(
+            name="particle",
+            axis_names=("x",),
+            description="particle variable",
+            default_cfg={"base": "value"},
+        )
+
+        def __init__(self, cfg):
+            self.cfg = dict(cfg)
+
+    monkeypatch.setattr(
+        builder_mod,
+        "_get_registry_builder",
+        lambda scope: (lambda name: Dummy),
+        raising=False,
+    )
+    monkeypatch.setattr(builder_mod, "resolve_particle_name", lambda name: "particle")
+    built = builder_mod.build_variable("particle", scope="particle", var_cfg={"extra": 1})
+    assert built.cfg["base"] == "value"
+    assert built.cfg["extra"] == 1
+
+
+def test_build_variable_invalid_scope_raises():
+    with pytest.raises(ValueError):
+        builder_mod._get_registry_builder("invalid")
